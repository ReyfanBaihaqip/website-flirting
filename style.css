/* ===== Reset & global ===== */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: 'Helvetica Neue', Arial, sans-serif;
}

html, body {
    height: 100%;
    overflow: hidden; 
}

/* ===== CONTAINER UTAMA (Single Screen) ===== */
#scene {
    position: relative;
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Latar belakang awal */
    background: linear-gradient(180deg, #020111 0%, #191621 100%);
    color: #fff;
    overflow: hidden;
    transform: scale(1); /* Baseline */
    /* Transisi latar belakang (memudar ke Deep Space) dan Zoom In (DISINKRONKAN KE 3s) */
    transition: background 1s cubic-bezier(0.8, 0.2, 0.2, 1), transform 3s ease-out;
}

/* EFEK AKHIR: Zoom In Halus pada Latar Belakang (DIPERKUAT) */
#scene.deep-space-final {
    transform: scale(1.2); /* Zoom in lebih jelas: 1.2 */
}

/* Latar Belakang Deep Space ketika Traveling */
#scene.traveling-mode {
    background: radial-gradient(circle at center, #1E003D 0%, #080010 100%);
}

canvas#stars {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: block;
    z-index: 1;
}

/* Konten Awal */
.content {
    position: relative;
    text-align: center;
    z-index: 10;
    max-width: 90%;
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

/* Konten Awal: Hilangkan saat traveling */
#scene.traveling-mode .content {
    opacity: 0;
    transform: translateY(20px);
    pointer-events: none;
}

.title { font-size: 4rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5rem; text-shadow: 0 0 15px rgba(255, 255, 255, 0.4); }
.subtitle { font-size: 1.2rem; opacity: 0.8; margin-bottom: 2rem; }
.btn {
    background: linear-gradient(45deg, #FF6B6B, #FFCD6B);
    color: #191621; border: none; padding: 12px 30px; border-radius: 50px;
    font-size: 1rem; font-weight: 600; cursor: pointer;
    box-shadow: 0 4px 20px rgba(255, 107, 107, 0.4); transition: transform 0.2s, box-shadow 0.2s;
}
.btn:hover { transform: translateY(-2px); box-shadow: 0 6px 25px rgba(255, 107, 107, 0.6); }

/* ===== BULAN BESAR (Deep Space Element) ===== */
.big-moon {
    position: absolute;
    top: 150%; /* Awalnya di luar viewport bawah */
    left: 80%;
    width: 300px;
    height: 300px;
    background: radial-gradient(circle at 35% 35%, #FFFFFF, #E0E0E0 50%, #B0B0B0 90%);
    border-radius: 50%;
    opacity: 0; /* Mulai tersembunyi */
    filter: blur(10px);
    transform: translate(-50%, -50%);
    transition: all 1s cubic-bezier(0.8, 0.2, 0.2, 1);
    z-index: 2; 
}

/* EFEK TRAVELING: Bulan bergerak cepat ke pusat, terlihat seperti streak */
#scene.traveling-mode .big-moon {
    top: 50%; /* Target Center */
    left: 50%; /* Target Center */
    width: 100px; /* Quick flash size */
    height: 100px;
    opacity: 1; /* Fully visible streak */
    filter: blur(50px); /* Massive blur for speed effect */
    box-shadow: 0 0 200px rgba(255, 255, 200, 1);
    transform: translate(-50%, -50%) scale(3); /* Slightly larger streak */
    /* Animasi float kecil saat mode traveling (selama 1s streak dan 0.8s modal display) */
    animation: moonHoldingFloat 10s ease-in-out infinite; 
}

/* Animasi float sangat kecil saat modal ditampilkan (menggantikan 'none') */
@keyframes moonHoldingFloat {
    0%, 100% { transform: translate(-50%, -50%) scale(3); }
    50% { transform: translate(-51%, -49%) scale(3.05); } 
}

/* EFEK AKHIR: Bulan mulai bergerak perlahan (moonFloat) */
#scene.deep-space-final .big-moon {
    top: 50%;
    left: 50%;
    /* Atur ukuran awal untuk animasi grow */
    width: 10px; 
    height: 10px;
    opacity: 1; 
    filter: blur(0);
    box-shadow: 0 0 150px rgba(255, 255, 200, 0.6);
    /* PERLAMBAT KECEPATAN (Ditingkatkan ke 60s) */
    /* SINKRONISASI: Animasi grow 3s, diikuti float 60s */
    animation: centerMoonGrow 3s forwards, moonFloat 60s ease-in-out infinite 3s; 
}

/* Animasi BENTUK: Bulan membesar dari pusat (3 detik) */
@keyframes centerMoonGrow {
    0% { transform: translate(-50%, -50%) scale(0.01); width: 10px; height: 10px; opacity: 0; }
    50% { transform: translate(-50%, -50%) scale(1.5); width: 300px; height: 300px; opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1); width: 250px; height: 250px; opacity: 1; } /* Ukuran akhir */
}

/* Animasi Mengambang Perlahan untuk Bulan (adjust to use scale/translate from center) */
@keyframes moonFloat {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    /* EFEK GERAK LEBIH HIDUP (Ditingkatkan ke 52% dan 1.01) */
    50% { transform: translate(-52%, -48%) scale(1.01); } 
}

/* ===== BEBATUAN/AWAN RINGAN (Rocks/Light Clouds) ===== */
.rock {
    position: absolute;
    background: rgba(80, 50, 100, 0.4);
    border-radius: 50%;
    filter: blur(2px);
    opacity: 0; /* Mulai tersembunyi */
    transition: transform 1s cubic-bezier(0.8, 0.2, 0.2, 1), opacity 1s;
    z-index: 3;
    /* Default: animation none. Hanya diaktifkan di deep-space-final */
    animation: none; 
}

/* Posisi dan kecepatan bebatuan (posisi akhir) */
.rock-1 { width: 150px; height: 80px; top: 10%; left: 5%; transform: translateY(100vh); }
.rock-2 { width: 80px; height: 120px; bottom: 15%; right: 10%; transform: translateY(100vh); }
.rock-3 { width: 200px; height: 100px; top: 70%; left: 20%; transform: translateY(100vh); }
.rock-4 { width: 100px; height: 60px; top: 30%; right: 25%; transform: translateY(100vh); }

/* Transisi Cepat: pindahkan batu ke posisi deep space dan munculkan */
#scene.traveling-mode .rock {
    opacity: 0.7; /* Muncul */
    transform: translateY(0); /* Kembali ke posisi aslinya */
    /* NEW: Animasi float kecil saat mode traveling (selama 1s streak dan 0.8s modal display) */
    animation: rockHoldingFloat 12s linear infinite alternate; 
}

/* Animasi float sangat kecil saat modal ditampilkan (menggantikan 'none') */
@keyframes rockHoldingFloat { 
    0%, 100% { transform: translate(0px, 0px) rotate(0deg); }
    50% { transform: translate(5px, 3px) rotate(1deg); } /* Gerakan sangat kecil */
}

/* EFEK AKHIR: Bebatuan mulai mengambang perlahan (rockFloat) */
#scene.deep-space-final .rock {
    animation: rockFloat linear infinite alternate; /* Aktifkan kembali animasi */
}
.rock-1.rock { animation-duration: 40s; }
.rock-2.rock { animation-duration: 35s; }
.rock-3.rock { animation-duration: 50s; }
.rock-4.rock { animation-duration: 38s; }

/* Animasi Sentuhan Lembut seperti Awan Ringan (rockFloat) */
@keyframes rockFloat { 
    0% { transform: translate(0px, 0px) rotate(0deg); opacity: 0.7; }
    50% { transform: translate(50px, 20px) rotate(5deg); opacity: 0.5; }
    100% { transform: translate(-30px, -10px) rotate(-3deg); opacity: 0.7; }
}

/* Styling Kalimat Akhir: "The Moon Is beautiful Isn't It?" */
.final-message {
    position: absolute;
    bottom: 15%;
    font-size: 1.5rem;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
    z-index: 10;
    opacity: 0; /* Mulai tersembunyi */
    transition: opacity 1s ease-in;
    font-weight: 300;
    letter-spacing: 0.1em;
    text-align: center; /* Pastikan pesan ada di tengah */
}

#scene.deep-space-final .final-message {
    opacity: 1;
    /* Tunda kemunculan hingga bulan selesai membesar (sekitar 3s) */
    transition-delay: 2.5s; 
}

/* ===== Modal (Di dalam Scene) ===== */
.modal {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: none; 
    z-index: 100; display: flex; align-items: center; justify-content: center;
    transition: opacity 0.5s ease-in-out;
}

.modal.hidden {
    display: none;
}

.modal-card {
    background: rgba(30, 30, 45, 0.9);
    padding: 40px; border-radius: 20px; text-align: center; max-width: 90%; width: 400px;
    position: relative; box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
    opacity: 0; transform: translateY(30px); 
    /* MODIFIKASI: Transisi 0.2s untuk efek kilatan cepat */
    transition: all 0.2s ease-out; 
    color: #fff;
}

.modal.show .modal-card { opacity: 1; transform: translateY(0); }
.modal-card h2 { font-size: 1.8rem; margin-top: 10px; margin-bottom: 0.5rem; animation: floatAnimation 6s ease-in-out infinite; }
.modal-card .message { opacity: 0.9; animation: floatAnimation 6s ease-in-out infinite; }
@keyframes floatAnimation { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
/* Tombol 'X' disembunyikan */
.close { 
    position: absolute; right: 16px; top: 12px; background: transparent; border: 0; 
    color: #fff; font-size: 1.1rem; cursor: pointer; transition: opacity 0.2s;
    display: none; /* Sembunyikan tombol 'X' */
}
.close:hover { opacity: 0.7; }